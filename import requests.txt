import requests
from pathlib import Path

# ======== CONFIGURE LOCALLY ‚Äî DO NOT SHARE ==========
API_KEY = "YOUR_API_KEY_HERE"          
VOICE_ID = "YOUR_VOICE_ID_HERE"        

# Correct working model for your account
MODEL_ID = "eleven_multilingual_v2"

OUTPUT_DIR = Path("episode1_audio_v3")
OUTPUT_DIR.mkdir(exist_ok=True)

OUTPUT_FILES = {
    "intro": OUTPUT_DIR / "episode1_intro_v3.mp3",
}

INTRO_TEXT = """
Welcome‚Ä¶ to The Uncanny Upgrade.

Stories from the moment artificial stopped feeling artificial.

Stories from that strange edge-space‚Ä¶
where machines begin to mimic emotion.
Where memory becomes‚Ä¶ duplicable.
And where reality quietly‚Ä¶ begins to glitch.

I‚Äôm Anthony West.

For years, I built technology.
Efficient. Elegant. Purposeful.

But lately‚Äî
I‚Äôve been studying something far messier.

What it means to be‚Ä¶ human.
When artificial versions of us‚Ä¶
can now perform pieces of our humanity‚Äî for us.

And today‚Ä¶
that question became personal.
"""


def generate_audio(text, filename):
    url = f"https://api.elevenlabs.io/v1/text-to-speech/{VOICE_ID}/stream"

    headers = {
        "xi-api-key": API_KEY,
        "Accept": "audio/mpeg",
        "Content-Type": "application/json"
    }

    payload = {
        "text": text,
        "model_id": MODEL_ID,
        "voice_settings": {
            "stability": 0.22,
            "similarity_boost": 0.90,
            "style": 0.78,
            "use_speaker_boost": True
        }
    }

    print(f"\nüéß Generating {filename.name}...")
    response = requests.post(url, headers=headers, json=payload, stream=True)

    if response.status_code == 200:
        with open(filename, "wb") as f:
            for chunk in response.iter_content(chunk_size=1024):
                f.write(chunk)
        print(f"   ‚úî Saved to {filename}")
    else:
        print(f"   ‚ùå Error {response.status_code}: {response.text}")


if __name__ == "__main__":
    generate_audio(INTRO_TEXT, OUTPUT_FILES["intro"])
